---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# rtweettree

<!-- badges: start -->
[![R-CMD-check](https://github.com/urswilke/rtweettree/workflows/R-CMD-check/badge.svg)](https://github.com/urswilke/rtweettree/actions)
<!-- badges: end -->

The goal of rtweettree is to recursively scrape a twitter tweet and all replies, quotes and likes (that the API provides) and visualize them in a network graph. The functionalities to scrape twitter data are heavily based on the excellent [**rtweet**](https://github.com/ropensci/rtweet) package. The graph network manipulation functionalities rely on the amazing [**tidygraph**](https://github.com/thomasp85/tidygraph) package and are visualized with [**ggraph**](https://github.com/thomasp85/ggraph).

## Responsible use

**rtweettree** should be used in strict accordance with Twitter's [developer terms](https://developer.twitter.com/en/developer-terms/more-on-restricted-use-cases).

## Installation

To get the current development version from Github:

```{r eval=FALSE}
## install remotes package if it's not already
if (!requireNamespace("remotes", quietly = TRUE)) {
  install.packages("remotes")
}

## install dev version of rtweettree from github
remotes::install_github("UrsWilke/rtweettree")
```

## load rtweettree package
```{r load}
library(rtweettree)
```

## Usage

In order to use **rtweettree** please refer to [the according section of **rtweet**](https://github.com/ropensci/rtweet#usage). It is probably good advice to first feel comfortable with [**rtweet**](https://github.com/ropensci/rtweet).

## Quick dive-in

To give you a quick understanding of the functionalities of this package, it can
first be used to scrape data related to a twitter status id `main_status_id` (using `rtweet`
functions under the hood):

```{r rtweettree_data, message=FALSE}
main_status_id <- "1438481824922181635"
l <- rtweettree_data(main_status_id)
```


```{r rtweettree_data_offline, include=FALSE, eval=TRUE}
# in order to makae it available offline:
l <- structure(
  tibble::lst(df_main_status, df_tree, df_tls, df_favs, df_retweets),
  class = c("rtweettree_data", "list")
)
```

You can then visualize this data with: 

```{r autoplot, eval=TRUE, message=FALSE}
ggplot2::autoplot(l)
```

A more in-depth example how to create the subtweet network graph from a tweet status_id is shown in the [vignette for tree visualization](articles/visualize_tree.html). 

```{r tree_viz, eval=FALSE}
vignette("visualize_tree", package = "rtweettree")
```

## TODOs:

* clean up code and refactor
* make plotting functions more customizable, e.g. with a ggplot2 autoplot method (?)
